---
MaterialDef: 
  name: "PBR Lighting"
  MatParams: 
  - Float: {name: Roughness, value: 1}
  - Texture2D: {name: MetallicRoughnessMap, colorSpace: Linear}
  - Color: {name: BaseColor, value: [1, 1, 1, 1]}
  - Vector2: {name: FadeInfo}
  MaterialParameters: 
    - Color:
      - BaseColor: [1.0, 1.0, 1.0, 1.0]
      - Specular: [1.0, 1.0, 1.0, 1.0]
      - Emissive:
    - Vector2:
      - FadeInfo: 
    - Vector3:
      - LightPos: 
      - LightDir: 
    - Vector4:
      - Splits:
    - Int:
      - NumberOfBones: 
      - NumberOfMorphTargets: 
      - NumberOfTargetsBuffers:
      - FilterMode:
      - BoundDrawBuffer:
    - Float:
      - Roughness: 1.0
      - Metallic: 1.0
      - Glossiness: 1.0
      # The type of normal map: -1.0 (DirectX), 1.0 (OpenGl)
      - NormalType: -1
      - EmissivePower: 3.0
      - EmissiveIntensity: 2.0
      - AlphaDiscardThreshold: 
      - ShadowIntensity: 
      - NormalScale: 
      - SpecularAAKappa: 
      - SpecularAASigma: 
      - PCFEdge: 
      - ParallaxHeight: 0.05
      - AoStrength: 
      - ShadowMapSize: 
    - Texture2D:
      - MetallicRoughnessMap: Linear
      - MetallicMap: Linear
      - NormalMap: Linear
      - ParallaxMap: Linear
      - BaseColorMap: 
      - EmissiveMap: 
      - SpecularMap: 
      - GlossinessMap: 
      - SpecularGlossinessMap: 
      - RoughnessMap: 
      - LightMap: 
      - ShadowMap0: 
      - ShadowMap1: 
      - ShadowMap2: 
      - ShadowMap3: 
      - ShadowMap4: 
      - ShadowMap5: 
    - Boolean:
      - UseSpecularAA: true
      - BackfaceShadows: false
      - UseSpecGloss: 
      - SteepParallax: 
      - HardwareShadows: 
      - HorizonFade: 
      - UseInstancing: 
      - AoPackedInMRMap: 
      - PackedNormalParallax: 
      - UseVertexColor: 
      - LightMapAsAOMap: 
      - SeparateTexCoord: 
    - Matrix4:
      - LightViewProjectionMatrix0: 
      - LightViewProjectionMatrix1: 
      - LightViewProjectionMatrix2: 
      - LightViewProjectionMatrix3: 
      - LightViewProjectionMatrix4: 
      - LightViewProjectionMatrix5: 
  Techniques: 
  - name: "PostShadow"
    FragmentShader: "Common/MatDefs/Shadow/PostShadowPBR.frag"
    VertexShader: "Common/MatDefs/Shadow/PostShadow.vert"
    ShaderLanguages: ["GLSL310", "GLSL300", "GLSL150", "GLSL100"]
    WorldParameters: 
    - "WorldViewProjectionMatrix"
    - "WorldMatrix"
    - "ViewProjectionMatrix"
    - "ViewMatrix"
    Defines: 
      BOUND_DRAW_BUFFER: "BoundDrawBuffer"
      HARDWARE_SHADOWS: "HardwareShadows"
      FILTER_MODE: "FilterMode"
      PCFEDGE: "PCFEdge"
      DISCARD_ALPHA: "AlphaDiscardThreshold"
      SHADOWMAP_SIZE: "ShadowMapSize"
      FADE: "FadeInfo"
      PSSM: "Splits"
      POINTLIGHT: "LightViewProjectionMatrix5"
      NUM_BONES: "NumberOfBones"
      INSTANCING: "UseInstancing"
      BACKFACE_SHADOWS: "BackfaceShadows"
      NUM_MORPH_TARGETS: "NumberOfMorphTargets"
      NUM_TARGETS_BUFFERS: "NumberOfTargetsBuffers"
    ForcedRenderState: 
      Blend: "Modulate"
      DepthWrite: "false"
      PolyOffset: [-0.1, 0]
  - name: "PreShadow"
    FragmentShader: "Common/MatDefs/Shadow/PreShadowPBR.frag"
    VertexShader: "Common/MatDefs/Shadow/PreShadow.vert"
    ShaderLanguages: ["GLSL300", "GLSL150", "GLSL100"]
    WorldParameters: 
    - "WorldViewProjectionMatrix"
    - "WorldViewMatrix"
    - "ViewProjectionMatrix"
    - "ViewMatrix"
    Defines: 
      BOUND_DRAW_BUFFER: "BoundDrawBuffer"
      DISCARD_ALPHA: "AlphaDiscardThreshold"
      NUM_BONES: "NumberOfBones"
      INSTANCING: "UseInstancing"
      NUM_MORPH_TARGETS: "NumberOfMorphTargets"
      NUM_TARGETS_BUFFERS: "NumberOfTargetsBuffers"
    ForcedRenderState: 
      FaceCull: "Off"
      ColorWrite: "false"
      PolyOffset: [5, 3]
  - name: "PreNormalPass"
    FragmentShader: "Common/MatDefs/SSAO/normal.frag"
    VertexShader: "Common/MatDefs/SSAO/normal.vert"
    ShaderLanguages: ["GLSL300", "GLSL150", "GLSL100"]
    WorldParameters: 
    - "WorldViewProjectionMatrix"
    - "WorldViewMatrix"
    - "NormalMatrix"
    - "ViewProjectionMatrix"
    - "ViewMatrix"
    Defines: 
      BOUND_DRAW_BUFFER: "BoundDrawBuffer"
      BASECOLORMAP_ALPHA: "BaseColorMap"
      NUM_BONES: "NumberOfBones"
      INSTANCING: "UseInstancing"
      NUM_MORPH_TARGETS: "NumberOfMorphTargets"
      NUM_TARGETS_BUFFERS: "NumberOfTargetsBuffers"
  - name: "Glow"
    FragmentShader: "Common/MatDefs/Light/PBRGlow.frag"
    VertexShader: "Common/MatDefs/Misc/Unshaded.vert"
    ShaderLanguages: ["GLSL300", "GLSL150", "GLSL100"]
    WorldParameters: 
    - "WorldViewProjectionMatrix"
    - "ViewProjectionMatrix"
    - "ViewMatrix"
    Defines: 
      HAS_EMISSIVEMAP: "EmissiveMap"
      HAS_EMISSIVECOLOR: "Emissive"
      BOUND_DRAW_BUFFER: "BoundDrawBuffer"
      NUM_BONES: "NumberOfBones"
      INSTANCING: "UseInstancing"
      NUM_MORPH_TARGETS: "NumberOfMorphTargets"
      NUM_TARGETS_BUFFERS: "NumberOfTargetsBuffers"
  - name: "Default"
    FragmentShader: "Common/MatDefs/Light/PBRLighting.frag"
    VertexShader: "Common/MatDefs/Light/PBRLighting.vert"
    ShaderLanguages: ["GLSL300", "GLSL150", "GLSL100"]
    LightMode: "SinglePassAndImageBased"
    WorldParameters: 
    - "WorldViewProjectionMatrix"
    - "CameraPosition"
    - "WorldMatrix"
    - "WorldNormalMatrix"
    - "ViewProjectionMatrix"
    - "ViewMatrix"
    Defines: 
      BOUND_DRAW_BUFFER: "BoundDrawBuffer"
      BASECOLORMAP: "BaseColorMap"
      NORMALMAP: "NormalMap"
      NORMALSCALE: "NormalScale"
      METALLICMAP: "MetallicMap"
      ROUGHNESSMAP: "RoughnessMap"
      EMISSIVEMAP: "EmissiveMap"
      EMISSIVE: "Emissive"
      SPECGLOSSPIPELINE: "UseSpecGloss"
      PARALLAXMAP: "ParallaxMap"
      NORMALMAP_PARALLAX: "PackedNormalParallax"
      STEEP_PARALLAX: "SteepParallax"
      LIGHTMAP: "LightMap"
      SEPARATE_TEXCOORD: "SeparateTexCoord"
      DISCARD_ALPHA: "AlphaDiscardThreshold"
      NUM_BONES: "NumberOfBones"
      INSTANCING: "UseInstancing"
      USE_PACKED_MR: "MetallicRoughnessMap"
      USE_PACKED_SG: "SpecularGlossinessMap"
      SPECULARMAP: "SpecularMap"
      SPECULAR_AA: "UseSpecularAA"
      SPECULAR_AA_SCREEN_SPACE_VARIANCE: "SpecularAASigma"
      SPECULAR_AA_THRESHOLD: "SpecularAAKappa"
      GLOSSINESSMAP: "GlossinessMap"
      NORMAL_TYPE: "NormalType"
      VERTEX_COLOR: "UseVertexColor"
      AO_MAP: "LightMapAsAOMap"
      AO_PACKED_IN_MR_MAP: "AoPackedInMRMap"
      AO_STRENGTH: "AoStrength"
      NUM_MORPH_TARGETS: "NumberOfMorphTargets"
      NUM_TARGETS_BUFFERS: "NumberOfTargetsBuffers"
      HORIZON_FADE: "HorizonFade"